"use strict";(self.webpackChunkwebsite_operator=self.webpackChunkwebsite_operator||[]).push([[5267],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return m}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},k=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),k=p(n),m=r,c=k["".concat(s,".").concat(m)]||k[m]||d[m]||l;return n?a.createElement(c,i(i({ref:t},u),{},{components:n})):a.createElement(c,i({ref:t},u))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,i=new Array(l);i[0]=k;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:r,i[1]=o;for(var p=2;p<l;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}k.displayName="MDXCreateElement"},9772:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return o},contentTitle:function(){return s},metadata:function(){return p},toc:function(){return u},default:function(){return k}});var a=n(7462),r=n(3366),l=(n(7294),n(3905)),i=["components"],o={title:"Cluster Configuration Settings",description:"Cluster Configuration Settings"},s=void 0,p={unversionedId:"Cluster-configuration-settings",id:"version-1.x.x/Cluster-configuration-settings",isDocsHomePage:!1,title:"Cluster Configuration Settings",description:"Cluster Configuration Settings",source:"@site/versioned_docs/version-1.x.x/Cluster-configuration-settings.md",sourceDirName:".",slug:"/Cluster-configuration-settings",permalink:"/kubernetes-operator/Cluster-configuration-settings",editUrl:"https://github.com/aerospike/kubernetes-operator/edit/main/versioned_docs/version-1.x.x/Cluster-configuration-settings.md",tags:[],version:"1.x.x",frontMatter:{title:"Cluster Configuration Settings",description:"Cluster Configuration Settings"},sidebar:"version-1.x.x/docsSidebar",previous:{title:"Limitations",permalink:"/kubernetes-operator/Limitations"},next:{title:"Aerospike Configuration Mapping",permalink:"/kubernetes-operator/Aerospike-configuration-mapping"}},u=[{value:"Custom Resource Definition and Custom Resource",id:"custom-resource-definition-and-custom-resource",children:[],level:2},{value:"Example CR",id:"example-cr",children:[],level:2},{value:"Configuration",id:"configuration",children:[],level:2},{value:"Spec",id:"spec",children:[],level:2},{value:"Validation Policy",id:"validation-policy",children:[],level:2},{value:"Network Policy",id:"network-policy",children:[],level:2},{value:"Storage",id:"storage",children:[{value:"Volume Policy",id:"volume-policy",children:[],level:3},{value:"Volume",id:"volume",children:[],level:3}],level:2},{value:"Aerospike Access Control",id:"aerospike-access-control",children:[{value:"Aerospike Role",id:"aerospike-role",children:[],level:3},{value:"Aerospike User",id:"aerospike-user",children:[],level:3}],level:2},{value:"Aerospike Config Secret",id:"aerospike-config-secret",children:[],level:2},{value:"Aerospike Config",id:"aerospike-config",children:[],level:2},{value:"Rack Config",id:"rack-config",children:[{value:"Rack",id:"rack",children:[],level:3}],level:2},{value:"Pod Spec",id:"pod-spec",children:[],level:2},{value:"Next",id:"next",children:[],level:2}],d={toc:u};function k(e){var t=e.components,n=(0,r.Z)(e,i);return(0,l.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h2",{id:"custom-resource-definition-and-custom-resource"},"Custom Resource Definition and Custom Resource"),(0,l.kt)("p",null,"The Operator ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/aerospike/aerospike-kubernetes-operator/tree/1.0.1/deploy/crds/aerospike.com_aerospikeclusters_crd.yaml"},"CRD")," specifies the CR that the operator uses. The Aerospike cluster Custom Resource (CR) based on this CRD drives the deployment and management of Aerospike clusters. To create and deploy an Aerospike cluster, create a CR yaml file."),(0,l.kt)("p",null,"This custom resource can be edited later on to make any changes to the Aerospike cluster."),(0,l.kt)("h2",{id:"example-cr"},"Example CR"),(0,l.kt)("p",null,"A sample AerospikeCluster resource yaml file that sets up a persistent namespace and an in-memory namespace is below."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},'apiVersion: aerospike.com/v1alpha1\nkind: AerospikeCluster\nmetadata:\n  name: aerocluster\n  namespace: aerospike\n\nspec:\n  size: 2\n  image: aerospike/aerospike-server-enterprise:5.5.0.3\n\n  multiPodPerHost: true\n\n  storage:\n    filesystemVolumePolicy:\n      cascadeDelete: true\n      initMethod: deleteFiles\n    volumes:\n      - storageClass: ssd\n        path: /opt/aerospike\n        volumeMode: filesystem\n        sizeInGB: 1\n      - path: /opt/aerospike/data\n        storageClass: ssd\n        volumeMode: filesystem\n        sizeInGB: 3\n\n  aerospikeConfigSecret:\n    secretName: aerospike-secret\n    mountPath:  /etc/aerospike/secret\n\n  aerospikeAccessControl:\n    users:\n      - name: admin\n        secretName: auth-secret\n        roles:\n          - sys-admin\n          - user-admin\n\n  aerospikeConfig:\n    service:\n      feature-key-file: /etc/aerospike/secret/features.conf\n    security:\n      enable-security: true\n    namespaces:\n      - name: test\n        memory-size: 3000000000\n        replication-factor: 1\n        storage-engine:\n          type: device\n          files:\n            - /opt/aerospike/data/test.dat\n          filesize: 2000000000\n          data-in-memory: true\n      - name: testMem\n        memory-size: 3000000000\n        replication-factor: 1\n        storage-engine:\n          type: memory\n\n  rackConfig:\n    namespaces:\n      - test\n    racks:\n      - id: 1\n        # Change to the zone for your k8s cluster.\n        zone: us-west1-a\n        # nodeName: kubernetes-minion-group-qp3m\n        aerospikeConfig:\n          service:\n            proto-fd-max: 18000\n        # rack level storage, used by pods of this rack\n        storage:\n          filesystemVolumePolicy:\n            initMethod: deleteFiles\n            cascadeDelete: true\n          blockVolumePolicy:\n            cascadeDelete: true\n          volumes:\n            - storageClass: ssd\n              path: /opt/aerospike\n              volumeMode: filesystem\n              sizeInGB: 1\n            - path: /opt/aerospike/data\n              storageClass: ssd\n              volumeMode: filesystem\n              sizeInGB: 3\n      - id: 2\n        # Change to the zone for your k8s cluster.\n        zone: us-west1-a\n        # nodeName: kubernetes-minion-group-tft3\n        aerospikeConfig:\n          service:\n            proto-fd-max: 16000\n\n  resources:\n    requests:\n      memory: 2Gi\n      cpu: 200m\n\n  podSpec:\n    sidecars:\n      - name: aerospike-prometheus-exporter\n        image: "aerospike/aerospike-prometheus-exporter:1.1.6"\n        ports:\n        - containerPort: 9145\n          name: exporter\n')),(0,l.kt)("p",null,"Other sample Aerospike Cluster CR objects can be found ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/aerospike/aerospike-kubernetes-operator/tree/1.0.1/deploy/samples"},"here")),(0,l.kt)("h2",{id:"configuration"},"Configuration"),(0,l.kt)("p",null,"The initial part of the CR selects the CRD and the namespace to use for the Aerospike cluster."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: aerospike.com/v1alpha1\nkind: AerospikeCluster\nmetadata:\n  name: aerocluster\n  namespace: aerospike\n")),(0,l.kt)("h2",{id:"spec"},"Spec"),(0,l.kt)("p",null,"The spec section provides the configuration for the cluster."),(0,l.kt)("p",null,"The fields are described below"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Field"),(0,l.kt)("th",{parentName:"tr",align:null},"Required"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Default"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"size ",(0,l.kt)("br",null),(0,l.kt)("sub",null,(0,l.kt)("inlineCode",{parentName:"td"},"Dynamic"))),(0,l.kt)("td",{parentName:"tr",align:null},"Yes"),(0,l.kt)("td",{parentName:"tr",align:null},"Integer"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"The size/number of Aerospike node pods to run for this cluster.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"image ",(0,l.kt)("br",null),(0,l.kt)("sub",null,(0,l.kt)("inlineCode",{parentName:"td"},"Dynamic")," ",(0,l.kt)("strong",{parentName:"td"},(0,l.kt)("inlineCode",{parentName:"strong"},"Rolling restart")))),(0,l.kt)("td",{parentName:"tr",align:null},"Yes"),(0,l.kt)("td",{parentName:"tr",align:null},"String"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"The official Aerospike Enterprise Server docker image to use for the node in the cluster.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"resources ",(0,l.kt)("br",null),(0,l.kt)("sub",null,(0,l.kt)("inlineCode",{parentName:"td"},"Dynamic")," ",(0,l.kt)("strong",{parentName:"td"},(0,l.kt)("inlineCode",{parentName:"strong"},"Rolling restart")))),(0,l.kt)("td",{parentName:"tr",align:null},"Yes"),(0,l.kt)("td",{parentName:"tr",align:null},"Structure"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"Configures the memory and CPU to use for the Aerospike server container.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"validationPolicy  ",(0,l.kt)("br",null),(0,l.kt)("sub",null,(0,l.kt)("inlineCode",{parentName:"td"},"Dynamic"))),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},"Structure"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"Configures the custom resource validation. See ",(0,l.kt)("a",{parentName:"td",href:"/kubernetes-operator/Cluster-configuration-settings#validation-policy"},"Validation Policy")," for details.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"aerospikeNetworkPolicy  ",(0,l.kt)("br",null),(0,l.kt)("sub",null,(0,l.kt)("inlineCode",{parentName:"td"},"Dynamic")," ",(0,l.kt)("strong",{parentName:"td"},(0,l.kt)("inlineCode",{parentName:"strong"},"Rolling restart")))),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},"Structure"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"Configures IP and port types used for access. See ",(0,l.kt)("a",{parentName:"td",href:"/kubernetes-operator/Cluster-configuration-settings#network-policy"},"Network Policy")," for details.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"storage   ",(0,l.kt)("br",null),(0,l.kt)("sub",null,(0,l.kt)("inlineCode",{parentName:"td"},"Dynamic"))),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},"Structure"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"Required for persistent namespaces and for Aerospike ",(0,l.kt)("a",{parentName:"td",href:"https://docs.aerospike.com/docs/configuration/index.md?show-removed=1#work-directory"},"work directory"),", unless the validation policy skips validating persistence of the work directory. See ",(0,l.kt)("a",{parentName:"td",href:"/kubernetes-operator/Cluster-configuration-settings#storage"},"Storage")," for details.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"multiPodPerHost"),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},"Boolean"),(0,l.kt)("td",{parentName:"tr",align:null},"False"),(0,l.kt)("td",{parentName:"tr",align:null},"Indicates if this configuration should run multiple pods per Kubernetes cluster host.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"aerospikeConfigSecret ",(0,l.kt)("br",null),(0,l.kt)("sub",null,(0,l.kt)("inlineCode",{parentName:"td"},"Dynamic")," ",(0,l.kt)("strong",{parentName:"td"},(0,l.kt)("inlineCode",{parentName:"strong"},"Rolling restart")))),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},"Structure"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"The names of the Kubernetes secret containing files containing sensitive data like licenses, credentials, and certificates.See ",(0,l.kt)("a",{parentName:"td",href:"/kubernetes-operator/Cluster-configuration-settings#aerospike-config-secret"},"Aerospike Config Secret")," for details.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"aerospikeAccessControl  ",(0,l.kt)("br",null),(0,l.kt)("sub",null,(0,l.kt)("inlineCode",{parentName:"td"},"Dynamic"))),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},"Structure"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"Required if Aerospike security is enabled. See ",(0,l.kt)("a",{parentName:"td",href:"/kubernetes-operator/Cluster-configuration-settings#aerospike-access-control"},"Access Control")," for  details")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"aerospikeConfig       ",(0,l.kt)("br",null),(0,l.kt)("sub",null,(0,l.kt)("inlineCode",{parentName:"td"},"Dynamic")," ",(0,l.kt)("strong",{parentName:"td"},(0,l.kt)("inlineCode",{parentName:"strong"},"Rolling restart")))),(0,l.kt)("td",{parentName:"tr",align:null},"Yes"),(0,l.kt)("td",{parentName:"tr",align:null},"configMap"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"A free form configMap confirming to the configuration schema for the deployed Aerospike server version. See ",(0,l.kt)("a",{parentName:"td",href:"/kubernetes-operator/Cluster-configuration-settings#aerospike-config"},"Aerospike Config")," for details.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"rackConfig            ",(0,l.kt)("br",null),(0,l.kt)("sub",null,(0,l.kt)("inlineCode",{parentName:"td"},"Dynamic"))),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},"Structure"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"Configures the operator to deploy rack aware Aerospike cluster. Pods will be deployed in given racks based on given configuration. See ",(0,l.kt)("a",{parentName:"td",href:"/kubernetes-operator/Cluster-configuration-settings#rack-config"},"Rack Config")," for details.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"podSpec            ",(0,l.kt)("br",null),(0,l.kt)("sub",null,(0,l.kt)("inlineCode",{parentName:"td"},"Dynamic")," ",(0,l.kt)("strong",{parentName:"td"},(0,l.kt)("inlineCode",{parentName:"strong"},"Rolling restart")))),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},"Structure"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"Configures the Kubernetes pod running Aerospike server. See ",(0,l.kt)("a",{parentName:"td",href:"/kubernetes-operator/Cluster-configuration-settings#pod-spec"},"Pod Spec")," for details.")))),(0,l.kt)("h2",{id:"validation-policy"},"Validation Policy"),(0,l.kt)("p",null,"This section configures the policy for validating the cluster CR."),(0,l.kt)("p",null,"The fields in this structure are"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Field"),(0,l.kt)("th",{parentName:"tr",align:null},"Required"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Default"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"skipWorkDirValidate     ",(0,l.kt)("br",null),(0,l.kt)("sub",null,(0,l.kt)("inlineCode",{parentName:"td"},"Dynamic"))),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},"Boolean"),(0,l.kt)("td",{parentName:"tr",align:null},"false"),(0,l.kt)("td",{parentName:"tr",align:null},"If true skips validating that the Aerospike work directory is stored on a persistent volume.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"skipXdrDlogFileValidate ",(0,l.kt)("br",null),(0,l.kt)("sub",null,(0,l.kt)("inlineCode",{parentName:"td"},"Dynamic"))),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},"Boolean"),(0,l.kt)("td",{parentName:"tr",align:null},"false"),(0,l.kt)("td",{parentName:"tr",align:null},"If true skips validating that the XDR digest log is stored on a persistent volume.")))),(0,l.kt)("h2",{id:"network-policy"},"Network Policy"),(0,l.kt)("p",null,"This section configures IP and port types used for access, alternate access, TLS access, and TLS alternate access endpoints on the Aerospike cluster."),(0,l.kt)("p",null,"Three types of endpoint configurations are supported."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"pod - uses the Kubernetes pod IP and Aerospike port that will work from other pods in the same Kubernetes cluster"),(0,l.kt)("li",{parentName:"ul"},"hostInternal - uses the Kubernetes cluster node's host IP and a mapped Aerospike port that will work from the VPC or internal network used by the Kubernetes cluster."),(0,l.kt)("li",{parentName:"ul"},"hostExternal - uses the Kubernetes cluster node's host external/public IP and a mapped Aerospike port that should work even from outside the Kubernetes network.")),(0,l.kt)("p",null,"The fields in this structure are"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Field"),(0,l.kt)("th",{parentName:"tr",align:null},"Required"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Default"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"access     ",(0,l.kt)("br",null),(0,l.kt)("sub",null,(0,l.kt)("inlineCode",{parentName:"td"},"Dynamic")," ",(0,l.kt)("strong",{parentName:"td"},(0,l.kt)("inlineCode",{parentName:"strong"},"Rolling restart")))),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},"Enum ","[pod, hostInternal, hostExternal]"),(0,l.kt)("td",{parentName:"tr",align:null},"hostInternal"),(0,l.kt)("td",{parentName:"tr",align:null},"Configures Aerospike access endpoint.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"alternateAccess     ",(0,l.kt)("br",null),(0,l.kt)("sub",null,(0,l.kt)("inlineCode",{parentName:"td"},"Dynamic")," ",(0,l.kt)("strong",{parentName:"td"},(0,l.kt)("inlineCode",{parentName:"strong"},"Rolling restart")))),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},"Enum ","[pod, hostInternal, hostExternal]"),(0,l.kt)("td",{parentName:"tr",align:null},"hostExternal"),(0,l.kt)("td",{parentName:"tr",align:null},"Configures Aerospike alternate access endpoint.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"tlsAccess     ",(0,l.kt)("br",null),(0,l.kt)("sub",null,(0,l.kt)("inlineCode",{parentName:"td"},"Dynamic")," ",(0,l.kt)("strong",{parentName:"td"},(0,l.kt)("inlineCode",{parentName:"strong"},"Rolling restart")))),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},"Enum ","[pod, hostInternal, hostExternal]"),(0,l.kt)("td",{parentName:"tr",align:null},"hostInternal"),(0,l.kt)("td",{parentName:"tr",align:null},"Configures Aerospike TLS access endpoint.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"tlsAlternateAccess     ",(0,l.kt)("br",null),(0,l.kt)("sub",null,(0,l.kt)("inlineCode",{parentName:"td"},"Dynamic")," ",(0,l.kt)("strong",{parentName:"td"},(0,l.kt)("inlineCode",{parentName:"strong"},"Rolling restart")))),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},"Enum ","[pod, hostInternal, hostExternal]"),(0,l.kt)("td",{parentName:"tr",align:null},"hostExternal"),(0,l.kt)("td",{parentName:"tr",align:null},"Configures Aerospike TLS alternate endpoint.")))),(0,l.kt)("h2",{id:"storage"},"Storage"),(0,l.kt)("p",null,"The storage section configures persistent volumes devices to provision and attach to the Aerospike cluster node container."),(0,l.kt)("p",null,"This section is required by default for persisting the Aerospike ",(0,l.kt)("a",{parentName:"p",href:"https://docs.aerospike.com/docs/configuration/index.md?show-removed=1#work-directory"},"work directory"),". The working directory should be stored on persistent storage to ensure pod restarts do not reset Aerospike server metadata files."),(0,l.kt)("p",null,"This section is also required for persisting Aerospike namespaces."),(0,l.kt)("p",null,"The fields in this structure are described below."),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Field"),(0,l.kt)("th",{parentName:"tr",align:null},"Required"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Default"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"filesystemVolumePolicy     ",(0,l.kt)("br",null),(0,l.kt)("sub",null,(0,l.kt)("inlineCode",{parentName:"td"},"Dynamic"))),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},"Structure"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"/kubernetes-operator/Cluster-configuration-settings#volume-policy"},"Volume policy")," for filesystem volumes")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"blockVolumePolicy          ",(0,l.kt)("br",null),(0,l.kt)("sub",null,(0,l.kt)("inlineCode",{parentName:"td"},"Dynamic"))),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},"Structure"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"/kubernetes-operator/Cluster-configuration-settings#volume-policy"},"Volume policy")," for block volumes")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Volumes                    ",(0,l.kt)("br",null),(0,l.kt)("sub",null,(0,l.kt)("inlineCode",{parentName:"td"},"Dynamic"))),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},"List of Structure"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"List of ",(0,l.kt)("a",{parentName:"td",href:"/kubernetes-operator/Cluster-configuration-settings#volume"},"Volumes")," to attach to Aerospike pods. Cannot add or remove storage volumes dynamically")))),(0,l.kt)("h3",{id:"volume-policy"},"Volume Policy"),(0,l.kt)("p",null,"Specifies persistent volumes policy to determine how new volumes are initialized."),(0,l.kt)("p",null,"The fields are"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Field"),(0,l.kt)("th",{parentName:"tr",align:null},"Required"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Default"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"initMethod    ",(0,l.kt)("br",null),(0,l.kt)("sub",null,(0,l.kt)("inlineCode",{parentName:"td"},"Dynamic"))),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},"Enum"),(0,l.kt)("td",{parentName:"tr",align:null},"none"),(0,l.kt)("td",{parentName:"tr",align:null},"Controls how the volumes are initialized when the persistent volume is attached the first time to a pod. Valid values are ",(0,l.kt)("inlineCode",{parentName:"td"},"none"),", ",(0,l.kt)("inlineCode",{parentName:"td"},"dd"),", ",(0,l.kt)("inlineCode",{parentName:"td"},"blkdiscard"),", ",(0,l.kt)("inlineCode",{parentName:"td"},"deleteFiles"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"cascadeDelete ",(0,l.kt)("br",null),(0,l.kt)("sub",null,(0,l.kt)("inlineCode",{parentName:"td"},"Dynamic"))),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},"Boolean"),(0,l.kt)("td",{parentName:"tr",align:null},"false"),(0,l.kt)("td",{parentName:"tr",align:null},"CascadeDelete determines if the persistent volumes are deleted after the pods these volumes binds to are terminated and removed from the cluster")))),(0,l.kt)("p",null,"For filesystem volumes, initMethod can be ",(0,l.kt)("inlineCode",{parentName:"p"},"none")," or ",(0,l.kt)("inlineCode",{parentName:"p"},"deleteFiles"),".\nFor block volumes, initMethod can be ",(0,l.kt)("inlineCode",{parentName:"p"},"none"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"dd")," or ",(0,l.kt)("inlineCode",{parentName:"p"},"blkdiscard"),"."),(0,l.kt)("p",null,"Note: ",(0,l.kt)("inlineCode",{parentName:"p"},"blkdiscard")," will only work for devices that support ",(0,l.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Trim_%28computing%29"},"TRIM"),". For AWS please refer to the ",(0,l.kt)("a",{parentName:"p",href:"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/InstanceStorage.html#instance-store-volumes"},"storage volumes guide")," to check TRIM support. If trim is not supported please use the slower ",(0,l.kt)("inlineCode",{parentName:"p"},"dd")," in the case your devices need initialization. For other devices please verify the support for TRIM command."),(0,l.kt)("h3",{id:"volume"},"Volume"),(0,l.kt)("p",null,"Describes a persistent volume to be attached to Aerospike devices."),(0,l.kt)("p",null,"The fields are"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Field"),(0,l.kt)("th",{parentName:"tr",align:null},"Required"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Default"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"path"),(0,l.kt)("td",{parentName:"tr",align:null},"Yes"),(0,l.kt)("td",{parentName:"tr",align:null},"String"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"The path on the pod where this block volume or filesystem volume will be attached. For block volumes, this will be the device path. For filesystem volumes, this will be the mount point.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"storageClass"),(0,l.kt)("td",{parentName:"tr",align:null},"Yes"),(0,l.kt)("td",{parentName:"tr",align:null},"String"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"The name of the storage class to use.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"volumeMode"),(0,l.kt)("td",{parentName:"tr",align:null},"Yes"),(0,l.kt)("td",{parentName:"tr",align:null},"Enum - filesystem, block, configMap"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"Specified the mode this volume should be created with. Filesystem mode creates a pre-formatted filesystem and mounts it at the specified path. Block mode creates a raw device and attaches it to the device path specified above. Config Map mode mounts a ",(0,l.kt)("a",{parentName:"td",href:"https://kubernetes.io/docs/concepts/configuration/configmap/"},"ConfigMap"),").")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"sizeInGB"),(0,l.kt)("td",{parentName:"tr",align:null},"Yes"),(0,l.kt)("td",{parentName:"tr",align:null},"Integer"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"The size in GB (gigabytes) to provision for this device.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"configMap"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"String"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"Name of the configmap for ",(0,l.kt)("inlineCode",{parentName:"td"},"configmap")," mode volumes. ",(0,l.kt)("br",null),(0,l.kt)("sub",null,(0,l.kt)("inlineCode",{parentName:"td"},"Required for configMap mode")))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"initMethod ",(0,l.kt)("br",null),(0,l.kt)("sub",null,(0,l.kt)("inlineCode",{parentName:"td"},"Dynamic"))),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},"Enum"),(0,l.kt)("td",{parentName:"tr",align:null},"none"),(0,l.kt)("td",{parentName:"tr",align:null},"Controls how this volume is initialized when the persistent volume is attached the first time to a pod. Valid values are ",(0,l.kt)("inlineCode",{parentName:"td"},"none"),", ",(0,l.kt)("inlineCode",{parentName:"td"},"dd"),", ",(0,l.kt)("inlineCode",{parentName:"td"},"blkdiscard"),", ",(0,l.kt)("inlineCode",{parentName:"td"},"deleteFiles"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"cascadeDelete  ",(0,l.kt)("br",null),(0,l.kt)("sub",null,(0,l.kt)("inlineCode",{parentName:"td"},"Dynamic"))),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},"Boolean"),(0,l.kt)("td",{parentName:"tr",align:null},"false"),(0,l.kt)("td",{parentName:"tr",align:null},"CascadeDelete determines if the persistent volume is deleted after the pod this volume binds to is terminated and removed from the cluster")))),(0,l.kt)("p",null,"For filesystem volumes, initMethod can be ",(0,l.kt)("inlineCode",{parentName:"p"},"none")," or ",(0,l.kt)("inlineCode",{parentName:"p"},"deleteFiles"),".\nFor block volumes, initMethod can be ",(0,l.kt)("inlineCode",{parentName:"p"},"none"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"dd")," or ",(0,l.kt)("inlineCode",{parentName:"p"},"blkdiscard"),"."),(0,l.kt)("p",null,"Note: ",(0,l.kt)("inlineCode",{parentName:"p"},"blkdiscard")," will only work for devices that support ",(0,l.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Trim_%28computing%29"},"TRIM"),". For AWS please refer to the ",(0,l.kt)("a",{parentName:"p",href:"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/InstanceStorage.html#instance-store-volumes"},"storage volumes guide")," to check TRIM support. If trim is not supported please use the slower ",(0,l.kt)("inlineCode",{parentName:"p"},"dd")," in the case your devices need initialization. For other devices please verify the support for TRIM command."),(0,l.kt)("h2",{id:"aerospike-access-control"},"Aerospike Access Control"),(0,l.kt)("p",null,"Provides Aerospike ",(0,l.kt)("a",{parentName:"p",href:"https://docs.aerospike.com/docs/configure/security/access-control/index.md"},"access control")," configuration for the Aerospike cluster."),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Field"),(0,l.kt)("th",{parentName:"tr",align:null},"Required"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Default"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"roles  ",(0,l.kt)("br",null),(0,l.kt)("sub",null,(0,l.kt)("inlineCode",{parentName:"td"},"Dynamic"))),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},"List of Structures"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"A list of ",(0,l.kt)("a",{parentName:"td",href:"/kubernetes-operator/Cluster-configuration-settings#aerospike-role"},"Role")," structures with an entry for each role.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"users  ",(0,l.kt)("br",null),(0,l.kt)("sub",null,(0,l.kt)("inlineCode",{parentName:"td"},"Dynamic"))),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},"List of Structures"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"A list of ",(0,l.kt)("a",{parentName:"td",href:"/kubernetes-operator/Cluster-configuration-settings#aerospike-user"},"User")," structures with an entry for each user. Required if Aerospike security is enabled.")))),(0,l.kt)("p",null,'If the Aerospike cluster has security enabled an entry for the "admin" user having at least "sys-admin" and "user-admin" roles is mandatory.'),(0,l.kt)("h3",{id:"aerospike-role"},"Aerospike Role"),(0,l.kt)("p",null,"Configures roles to have in the Aerospike cluster."),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Field"),(0,l.kt)("th",{parentName:"tr",align:null},"Required"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Default"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"name"),(0,l.kt)("td",{parentName:"tr",align:null},"Yes"),(0,l.kt)("td",{parentName:"tr",align:null},"Strings"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"The name of this role.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"privileges      ",(0,l.kt)("br",null),(0,l.kt)("sub",null,(0,l.kt)("inlineCode",{parentName:"td"},"Dynamic"))),(0,l.kt)("td",{parentName:"tr",align:null},"Yes"),(0,l.kt)("td",{parentName:"tr",align:null},"List of Strings"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"The privileges to grant this role.")))),(0,l.kt)("h3",{id:"aerospike-user"},"Aerospike User"),(0,l.kt)("p",null,"Configures users to have for the aerospike cluster."),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Field"),(0,l.kt)("th",{parentName:"tr",align:null},"Required"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Default"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"name"),(0,l.kt)("td",{parentName:"tr",align:null},"Yes"),(0,l.kt)("td",{parentName:"tr",align:null},"Strings"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"The name of this user.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"secretName       ",(0,l.kt)("br",null),(0,l.kt)("sub",null,(0,l.kt)("inlineCode",{parentName:"td"},"Dynamic"))),(0,l.kt)("td",{parentName:"tr",align:null},"Yes"),(0,l.kt)("td",{parentName:"tr",align:null},"String"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"The name of the secret containing this user's password.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"roles            ",(0,l.kt)("br",null),(0,l.kt)("sub",null,(0,l.kt)("inlineCode",{parentName:"td"},"Dynamic"))),(0,l.kt)("td",{parentName:"tr",align:null},"Yes"),(0,l.kt)("td",{parentName:"tr",align:null},"List of Strings"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"The roles to grant to this user.")))),(0,l.kt)("h2",{id:"aerospike-config-secret"},"Aerospike Config Secret"),(0,l.kt)("p",null,"Configures the name of the secret to use and the mount path to mount the secret files on the container."),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Field"),(0,l.kt)("th",{parentName:"tr",align:null},"Required"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Default"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"secretName  ",(0,l.kt)("br",null),(0,l.kt)("sub",null,(0,l.kt)("inlineCode",{parentName:"td"},"Dynamic"))),(0,l.kt)("td",{parentName:"tr",align:null},"Yes"),(0,l.kt)("td",{parentName:"tr",align:null},"String"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"The name of the secret")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"mountPath  ",(0,l.kt)("br",null),(0,l.kt)("sub",null,(0,l.kt)("inlineCode",{parentName:"td"},"Dynamic"))),(0,l.kt)("td",{parentName:"tr",align:null},"Yes"),(0,l.kt)("td",{parentName:"tr",align:null},"String"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"The path where the secret files will be mounted in the container.")))),(0,l.kt)("h2",{id:"aerospike-config"},"Aerospike Config"),(0,l.kt)("p",null,"The YAML form of Aerospike server configuration.\nSee ",(0,l.kt)("a",{parentName:"p",href:"/kubernetes-operator/Aerospike-configuration-mapping"},"Aerospike Configuration")," for details."),(0,l.kt)("h2",{id:"rack-config"},"Rack Config"),(0,l.kt)("p",null,"Configures the operator to deploy rack aware Aerospike cluster. Pods will be deployed in given racks based on the given configuration."),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Field"),(0,l.kt)("th",{parentName:"tr",align:null},"Required"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Default"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"namespaces ",(0,l.kt)("br",null),(0,l.kt)("sub",null,(0,l.kt)("inlineCode",{parentName:"td"},"Dynamic")," ",(0,l.kt)("strong",{parentName:"td"},(0,l.kt)("inlineCode",{parentName:"strong"},"Rolling restart")))),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},"List of Strings"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"List of Aerospike namespaces for which rack feature will be enabled.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"racks ",(0,l.kt)("br",null),(0,l.kt)("sub",null,(0,l.kt)("inlineCode",{parentName:"td"},"Dynamic"))),(0,l.kt)("td",{parentName:"tr",align:null},"Yes"),(0,l.kt)("td",{parentName:"tr",align:null},"List of structures"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"List of ",(0,l.kt)("a",{parentName:"td",href:"/kubernetes-operator/Cluster-configuration-settings#rack"},"racks"))))),(0,l.kt)("p",null,"See ",(0,l.kt)("a",{parentName:"p",href:"/kubernetes-operator/Rack-Awareness"},"Rack awareness")," for details."),(0,l.kt)("h3",{id:"rack"},"Rack"),(0,l.kt)("p",null,"Rack specifies single rack config"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Field"),(0,l.kt)("th",{parentName:"tr",align:null},"Required"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Default"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"id"),(0,l.kt)("td",{parentName:"tr",align:null},"Yes"),(0,l.kt)("td",{parentName:"tr",align:null},"Integer"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"Identifier for the rack.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"zone"),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},"String"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"Zone name for setting rack affinity. Rack pods will be deployed to the given Zone.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"region"),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},"String"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"Region name for setting rack affinity. Rack pods will be deployed to the given Region.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"rackLabel"),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},"String"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"Rack label for setting rack affinity. Rack pods will be deployed in k8s nodes having rack label ",(0,l.kt)("inlineCode",{parentName:"td"},"aerospike.com/rack-label: <rack-label>"),".")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"nodeName"),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},"String"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"K8s Node name for setting rack affinity. Rack pods will be deployed on the given k8s Node.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"aerospikeConfig  ",(0,l.kt)("br",null),(0,l.kt)("sub",null,(0,l.kt)("inlineCode",{parentName:"td"},"Dynamic")," ",(0,l.kt)("strong",{parentName:"td"},(0,l.kt)("inlineCode",{parentName:"strong"},"Rolling restart")))),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},"Structure"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"This local ",(0,l.kt)("a",{parentName:"td",href:"/kubernetes-operator/Cluster-configuration-settings#aerospike-config"},"AerospikeConfig")," is a patch, which will be merged recursively with common global AerospikeConfig and will be used for this Rack. See ",(0,l.kt)("a",{parentName:"td",href:"/kubernetes-operator/Rack-Awareness#merging-aerospikeconfig"},"merging AerospikeConfig"),". If this AerospikeConfig is not given then global AerospikeConfig will be used.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"storage  ",(0,l.kt)("br",null),(0,l.kt)("sub",null,(0,l.kt)("inlineCode",{parentName:"td"},"Dynamic"))),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},"Structure"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"This local ",(0,l.kt)("a",{parentName:"td",href:"/kubernetes-operator/Cluster-configuration-settings#storage"},"Storage")," specify persistent storage to use for the pods in this rack. If this Storage is not given then global Storage will be used.")))),(0,l.kt)("h2",{id:"pod-spec"},"Pod Spec"),(0,l.kt)("p",null,"Configures the Kubernetes pod running Aerospike server.\nSidecar containers for monitoring, or running connectors can be added to each Aerospike pod."),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Field"),(0,l.kt)("th",{parentName:"tr",align:null},"Required"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Default"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"sidecars"),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},"List of ",(0,l.kt)("a",{parentName:"td",href:"https://pkg.go.dev/k8s.io/api/core/v1#Container"},"Container")," structures"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"List of side containers to run along with the main Aerospike server container. Volume mounts are not supported.")))),(0,l.kt)("p",null,"All config map volumes are attached to all sidecar containers.\nOther storage volume types are not supported for sidecar containers."),(0,l.kt)("p",null,"See ",(0,l.kt)("a",{parentName:"p",href:"/kubernetes-operator/Monitoring"},"Monitoring")," for details."),(0,l.kt)("h2",{id:"next"},"Next"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"/kubernetes-operator/Scaling"},"Scale up/down")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"/kubernetes-operator/Version-upgrade"},"Aerospike version upgrade/downgrade")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"/kubernetes-operator/Aerospike-configuration-change"},"Aerospike configuration change"))))}k.isMDXComponent=!0}}]);